// Some JS must-have's. https://github.com/svexican/js-extras 

//
//
(function(){var t=[].slice;String.prototype.toBoolean=function(){return"true"===this.valueOf()?!0:"false"===this.valueOf()?!1:void 0},String.prototype.closest_in=function(t,e){if(("undefined"==typeof utils||null===utils)&&null==utils.levenshtein)throw Error("utils.levenshtein is not defined");return t.filter(function(t){return function(n){return utils.levenshtein(t,n)<=e}}(this))},String.prototype.capitalise=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.regExpEscape=function(){return this.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},String.prototype.format=function(){var e,n,r,i;for(e=1<=arguments.length?t.call(arguments,0):[],i=this,n=e.length;n;)n-=1,r=new RegExp("\\{"+n+"\\}","gm"),i=i.replace(r,e[n]);return i},String.prototype.camelise=function(){return this.replace(/(?:^|[-_])(\w)/g,function(t,e){return e?e.toUpperCase():""})},String.prototype.snakelise=function(){return this.replace(/(^[A-Z])|(?:[-_])*([A-Z])|([-_])/g,function(t,e,n,r){var i;return null!=e?e.toLowerCase():(i=null!=n?n.toLowerCase():"",r?i+"_":"_"+i)})}}).call(this);

//
//
(function(){var t=[].indexOf||function(t){for(var r=0,n=this.length;n>r;r++)if(r in this&&this[r]===t)return r;return-1};Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.count=function(){return this.length},Array.prototype.empty=function(){return 0===this.length},Array.prototype.head=function(){return this[0]},Array.prototype.tail=function(){return Array.prototype.slice.call(this,1)},Array.prototype.transpose=function(t,r){var n;return this.length<t+1||this.length<r+1?this:(n=this[t],this[t]=this[r],this[r]=n,this.splice(this.length,0),this)},Array.prototype.shuffle=function(){var t,r,n,i,e;for(t=n=i=this.length-1;1>=i?1>=n:n>=1;t=1>=i?++n:--n)r=Math.floor(Math.random()*(t+1)),e=[this[r],this[t]],this[t]=e[0],this[r]=e[1];return this},Array.prototype.unique=function(){var t,r,n,i,e;for(n=new Object,t=r=0,i=this.length;i>=0?i>r:r>i;t=i>=0?++r:--r)n[this[t]]=this[t];return function(){var r;r=[];for(t in n)e=n[t],r.push(e);return r}()},Array.prototype.difference=function(r){return this.filter(function(n){return t.call(r,n)<0})},Array.prototype.intersection=function(r){return this.filter(function(n){return t.call(r,n)>=0})},Array.prototype.union=function(t){return this.difference(t).concat(t)},Array.prototype.remove=function(t){var r,n,i,e;for(n=i=0,e=this.length;e>i;n=++i)if(r=this[n],r===t)return this.splice(n,1)},Array.prototype.humanPrint=function(t,r,n){var i,e;return n=n||void 0,0===this.length?n:1===this.length?this[0]:(e=this.slice(-1)[0],i=this.slice(0,-1).join((t||",")+" "),i+(" "+(r||"&")+" ")+e)},Array.prototype.indexOf_p=function(t,r){var n,i,e,o;for(i=e=0,o=this.length;o>e;i=++e)if(n=this[i],n[t]===r)return i},Array.prototype.filter_p=function(t,r){return this.filter(function(n){return n[t]===r})},Array.prototype.filter_firstp=function(t,r){return this.filter_p(t,r)[0]},Array.prototype.unique_p=function(t){var r,n,i,e,o,u,h;for(e=new Object,n=i=0,o=this.length;o>=0?o>i:i>o;n=o>=0?++i:--i)e[this[n][t]]=this[n];u=[];for(r in e)h=e[r],u.push(h);return u},Array.prototype.remove_p=function(t,r){var n,i,e,o;for(i=e=0,o=this.length;o>e;i=++e)if(n=this[i],n[t]===r)return this.splice(i,1)},Array.prototype.difference_p=function(r,n){return this.filter(function(i){var e;return e=i[n],t.call(r.map(function(t){return t[n]}),e)<0})},Array.prototype.union_p=function(t,r){return this.differenceBy(t,r).concat(t)},Array.prototype.sort_p=function(t,r,n){var i;return i=function(){var i;return i=n?function(r){return n(r[t])}:function(r){return r[t]},function(t,n){var e,o;return e=i(t),o=i(n),[-1,1][+!!r]*((e>o)-(o>e))}},this.sort(i())},Array.prototype.group_p=function(t){var r,n,i,e;for(e=new Object,n=0,i=this.length;i>n;n++){if(r=this[n],"undefined"==typeof r[t])throw'AttributeError: Cannot read property "'+t+'" of '+r;e[r[t]]instanceof Array?e[r[t]].push(r):e[r[t]]=[r]}return e}}).call(this);

//
//
(function(){Object.defineProperty(Object.prototype,"merge_with",{enumerable:!1,value:function(e){var t,r;for(t in e)r=e[t],this[t]=r;return this}})}).call(this);

//
//
(function(){Date.prototype.prettyHTML=function(t,e){var a,s,n,i,r;return t=t||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=e||["January","February","Mach","April","May","June","July","August","September","October","November","December"],a=new Date(this.getTime()+6e4*this.getTimezoneOffset()),n=e[a.getMonth()],s=a.getDate()<10?"&nbsp;"+a.getDate():""+a.getDate(),r=a.getFullYear(),i=t[a.getDay()].substr(0,3),"<span style='font-family: monospace'> "+n+" "+s+", "+r+" <span style='color: #aaaaaa'>("+i+")</span> </span>"},Date.prototype.standardDate=function(){var t,e,a;return e=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),a=this.getFullYear(),a+"-"+e+"-"+t},Date.prototype.standardDateTime=function(){var t,e,a,s,n;return s=this.getMonth()<9?"0"+(this.getMonth()+1):""+(this.getMonth()+1),t=this.getDate()<10?"0"+this.getDate():""+this.getDate(),e=this.getHours()<10?"0"+this.getHours():""+this.getHours(),a=this.getMinutes()<10?"0"+this.getMinutes():""+this.getMinutes(),n=this.getFullYear(),n+"-"+s+"-"+t+" "+e+":"+a},Date.prototype.fix_dashes=function(t){return t.replace(/(\d{4})-(\d{2})-(\d{2})/gi,"$1/$2/$3")}}).call(this);

//
//
(function(){var n,l=[].slice;n={fnRun:function(){var n,o;return o=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],"function"==typeof o?o.apply(void 0,n):void 0},levenshtein:function(n,l){var o,e,i,r,t,f,u,a,d,h,c,p,s,w,g,v,y,b;if(f=n.length,u=l.length,0===f)return u;if(0===u)return f;for(o=new Array,e=r=0,p=f;p>=0?p>=r:r>=p;e=p>=0?++r:--r){for(b=[],i=t=0,s=u;s>=0?s>=t:t>=s;i=s>=0?++t:--t)b.push(0);o.push(b)}for(e=a=1,w=f;w>=1?w>=a:a>=w;e=w>=1?++a:--a)o[e][0]=e;for(i=d=1,g=u;g>=1?g>=d:d>=g;i=g>=1?++d:--d)o[0][i]=i;for(i=h=1,v=u;v>=1?v>=h:h>=v;i=v>=1?++h:--h)for(e=c=1,y=f;y>=1?y>=c:c>=y;e=y>=1?++c:--c)n[e-1]===l[i-1]?o[e][i]=o[e-1][i-1]:o[e][i]=Math.min(o[e-1][i]+1,o[e][i-1]+1,o[e-1][i-1]+1);return o[f][u]}},"undefined"!=typeof global&&null!==global&&(global.utils=n),"undefined"!=typeof window&&null!==window&&(window.utils=n)}).call(this);